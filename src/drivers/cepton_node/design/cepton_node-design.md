cepton_node
=============

This is the design document for the `cepton_node` package.

# Purpose / Use cases
<!-- Required -->
<!-- Things to consider:
    - Why did we implement this feature? -->

A driver node is necessary for every supported sensor. This allows us to put the sensor output into
a common representation so that we may use common downstream processing algorithms, in this case
3D perception algorithms.


# Design
<!-- Required -->
<!-- Things to consider:
    - How does it work? -->

These classes are specializations of the apex_auto::drivers::udp_driver::UdpDriverNode class,
which handles receiving UDP packets, and basic error handling by way of timeouts.

This class then passes a received packet to the cepton_sdk where it is then converted into
points. These points are then deserialized into the appropriate output message type.


## Assumptions / Known limits
<!-- Required -->

This node is not production grade due to the dependence on the cepton_sdk, which has unknown
qualities.

On top of this, it inherits the limitations of the UdpDriverNode, insofar as it cannot directly
handle bursty behavior, which is not expected out of a Cepton sensor.

## Inputs / Outputs / API
<!-- Required -->
<!-- Things to consider:
    - How do you use the package / API? -->

The inputs to this node are UDP packets.

The output of this node are:

- apex_auto_msgs::msg::PointBlock
- sensor_msgs::msg::PointCloud2


## Inner-workings / Algorithms
<!-- If applicable -->

All of the packet processing is offloaded to the cepton_sdk.

All state machine logic is due to apex_auto::drivers::udp_driver::UdpDriverNode


## Error detection and handling
<!-- Required -->

Timeout error handling is handled by apex_auto::drivers::udp_driver::UdpDriverNode.

Any errors generated by the cepton_sdk generally result in an `std::runtime_error` being thrown.


# Security considerations
<!-- Required -->
<!-- Things to consider:
- Spoofing (How do you check for and handle fake input?)
- Tampering (How do you check for and handle tampered input?)
- Repudiation (How are you affected by the actions of external actors?).
- Information Disclosure (Can data leak?).
- Denial of Service (How do you handle spamming?).
- Elevation of Privilege (Do you need to change permission levels during execution?) -->

This module inherits all the security considerations from the udp_driver.

Additionally, the cepton_sdk is a place in which there can potentially be security flaws or
vulnerabilities.


# References / External links
<!-- Optional -->

See [cepton docs](../src/apex_auto/core/drivers/cepton_node/lib/cepton_sdk_redist/docs/html/index.html)
for more details and some API reference.

# Future extensions / Unimplemented parts
<!-- Optional -->


# Related issues
<!-- Required -->
- #1934 Initial implementation
- #2150: QoL improvements: timestamp, transform. correct default frame, some efficiency improvements
- #1956: Replaced apex time with `std::chrono` constructs.
- #2838: apex_app -> apex_auto
- #3451: Add wait_to_matched to initialization, add associated parameter
- #3714: PointBlock is bounded instead of fixed sized
